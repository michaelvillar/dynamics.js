(function(){var t,e,i,n,r,s,o,a,u,l,h,p,f,m,c,y,d,v,g,x=function(t,e){return function(){return t.apply(e,arguments)}},b={}.hasOwnProperty,M=function(t,e){for(var i in e){if(b.call(e,i))t[i]=e[i]}function n(){this.constructor=t}n.prototype=e.prototype;t.prototype=new n;t.__super__=e.prototype;return t};r=function(){t.properties={};function t(t){var e,i,n;this.options=t!=null?t:{};this.at=x(this.at,this);this.next=x(this.next,this);this.init=x(this.init,this);n=this.options.type.properties;for(e in n){i=n[e];if(!(this.options[e]!=null)&&!i.editable){this.options[e]=i["default"]}}}t.prototype.init=function(){return this.t=0};t.prototype.next=function(t){var e;if(this.t>1){this.t=1}e=this.at(this.t);this.t+=t;return e};t.prototype.at=function(t){return[t,t]};return t}();l=function(t){M(e,t);function e(){this.at=x(this.at,this);this.init=x(this.init,this);return e.__super__.constructor.apply(this,arguments)}e.properties={duration:{min:100,max:4e3,"default":1e3}};e.prototype.init=function(){return e.__super__.init.apply(this,arguments)};e.prototype.at=function(t){return[t,t]};return e}(r);a=function(t){M(e,t);e.properties={bounce:{min:0,max:80,"default":40},gravity:{min:1,max:4e3,"default":1e3},expectedDuration:{editable:false}};function e(t){var i;this.options=t!=null?t:{};this.at=x(this.at,this);this.curve=x(this.curve,this);this.init=x(this.init,this);this.length=x(this.length,this);this.gravityValue=x(this.gravityValue,this);this.bounceValue=x(this.bounceValue,this);this.duration=x(this.duration,this);this.expectedDuration=x(this.expectedDuration,this);if((i=this.initialForce)==null){this.initialForce=false}this.options.duration=this.duration();e.__super__.constructor.call(this,this.options)}e.prototype.expectedDuration=function(){return this.duration()};e.prototype.duration=function(){return Math.round(1e3*1e3/this.options.gravity*this.length())};e.prototype.bounceValue=function(){var t;t=this.options.bounce/100;t=Math.min(t,80);return t};e.prototype.gravityValue=function(){return this.options.gravity/100};e.prototype.length=function(){var t,e,i,n,r;i=this.bounceValue();r=this.gravityValue();e=Math.sqrt(2/r);n={a:-e,b:e,H:1};if(this.initialForce){n.a=0;n.b=n.b*2}while(n.H>.001){t=n.b-n.a;n={a:n.b,b:n.b+t*i,H:n.H*i*i}}return n.b};e.prototype.init=function(){var t,i,n,r,s,o;e.__super__.init.apply(this,arguments);t=this.length();s=this.gravityValue();s=s*t*t;n=this.bounceValue();i=Math.sqrt(2/s);this.curves=[];r={a:-i,b:i,H:1};if(this.initialForce){r.a=0;r.b=r.b*2}this.curves.push(r);o=[];while(r.b<1&&r.H>.001){t=r.b-r.a;r={a:r.b,b:r.b+t*n,H:r.H*n*n};o.push(this.curves.push(r))}return o};e.prototype.curve=function(t,e,i,n){var r,s,o;r=e-t;o=2/r*n-1-t*2/r;s=o*o*i-i+1;if(this.initialForce){s=1-s}return s};e.prototype.at=function(t){var e,i,n,r,s;e=this.options.bounce/100;n=this.options.gravity;r=0;i=this.curves[r];while(!(t>=i.a&&t<=i.b)){r+=1;i=this.curves[r];if(!i){break}}if(!i){if(this.initialForce){s=0}else{s=1}}else{s=this.curve(i.a,i.b,i.H,t)}return[t,s]};return e}(r);u=function(t){M(e,t);e.prototype.returnsToSelf=true;function e(t){this.options=t!=null?t:{};this.initialForce=true;e.__super__.constructor.call(this,this.options)}return e}(a);f=function(t){M(e,t);function e(){this.at=x(this.at,this);return e.__super__.constructor.apply(this,arguments)}e.properties={frequency:{min:0,max:100,"default":15},friction:{min:1,max:1e3,"default":200},anticipationStrength:{min:0,max:1e3,"default":0},anticipationSize:{min:0,max:99,"default":0},duration:{min:100,max:4e3,"default":1e3}};e.prototype.at=function(t){var e,i,n,r,s,o,a,u,l,h,p,f,m,c=this;a=Math.max(1,this.options.frequency);u=Math.pow(20,this.options.friction/100);h=this.options.anticipationSize/100;o=Math.max(0,h);l=t/(1-h)-h/(1-h);if(t<h){e=function(t){var e,i,n,r,s;e=.8;r=h/(1-h);s=0;n=(r-e*s)/(r-s);i=(e-n)/r;return i*t*c.options.anticipationStrength/100+n};m=h/(1-h)-h/(1-h);f=0/(1-h)-h/(1-h);s=Math.acos(1/e(m));n=(Math.acos(1/e(f))-s)/(a*-h)}else{e=function(t){return Math.pow(u/10,-t)*(1-t)};s=0;n=1}i=e(l);r=a*(t-h)*n+s;p=1-i*Math.cos(r);return[t,p,i,l,r]};return e}(r);p=function(t){M(e,t);function e(){this.at=x(this.at,this);return e.__super__.constructor.apply(this,arguments)}e.properties={frequency:{min:0,max:100,"default":15},friction:{min:1,max:1e3,"default":200},duration:{min:100,max:4e3,"default":1e3}};e.prototype.returnsToSelf=true;e.prototype.at=function(t){var e,i,n,r,s,o,a,u,l=this;o=Math.max(1,this.options.frequency);a=Math.pow(20,this.options.friction/100);e=function(t){return 1-Math.pow(a/10,-t)*(1-t)};i=e(t);n=e(1-t);r=Math.cos(t*2*3.14-3.14)/2+.5;r=Math.pow(r,this.options.friction/100);s=o*t;u=Math.cos(s)*r;return[t,u,r,-r]};return e}(r);i=function(t){M(e,t);e.properties={points:{type:"points","default":[{x:0,y:0,controlPoints:[{x:.2,y:0}]},{x:.574,y:1.208,controlPoints:[{x:.291,y:1.199},{x:.806,y:1.19}]},{x:1,y:1,controlPoints:[{x:.846,y:1}]}]},duration:{min:100,max:4e3,"default":1e3}};function e(t){this.options=t!=null?t:{};this.at=x(this.at,this);this.yForX=x(this.yForX,this);this.B=x(this.B,this);this.B_=x(this.B_,this);this.returnsToSelf=this.options.points[this.options.points.length-1].y===0;e.__super__.constructor.call(this,this.options)}e.prototype.B_=function(t,e,i,n,r){return Math.pow(1-t,3)*e+3*Math.pow(1-t,2)*t*i+3*(1-t)*Math.pow(t,2)*n+Math.pow(t,3)*r};e.prototype.B=function(t,e,i,n,r){return{x:this.B_(t,e.x,i.x,n.x,r.x),y:this.B_(t,e.y,i.y,n.y,r.y)}};e.prototype.yForX=function(t,e){var i,n,r,s,o,a,u,l,h,p;i=null;for(h=0,p=e.length;h<p;h++){n=e[h];if(t>=n(0).x&&t<=n(1).x){i=n}if(i!==null){break}}if(!i){if(this.returnsToSelf){return 0}else{return 1}}l=1e-4;s=0;a=1;o=(a+s)/2;u=i(o).x;r=0;while(Math.abs(t-u)>l&&r<100){if(t>u){s=o}else{a=o}o=(a+s)/2;u=i(o).x;r+=1}return i(o).y};e.prototype.at=function(t){var i,n,r,s,o,a,u,l=this;o=t;s=this.options.points||e.properties.points["default"];i=[];u=function(t,e){var n;n=function(i){return l.B(i,t,t.controlPoints[t.controlPoints.length-1],e.controlPoints[0],e)};return i.push(n)};for(n in s){r=parseInt(n);if(r>=s.length-1){break}u(s[r],s[r+1])}a=this.yForX(o,i);return[o,a]};return e}(r);o=function(t){M(e,t);e.properties={friction:{min:1,max:1e3,"default":500},duration:{min:100,max:4e3,"default":1e3}};function e(t){var n,r;this.options=t!=null?t:{};this.at=x(this.at,this);e.__super__.constructor.apply(this,arguments);n=this.options.friction||e.properties.friction["default"];r=[{x:0,y:0,controlPoints:[{x:1-n/1e3,y:0}]},{x:1,y:1,controlPoints:[{x:n/1e3,y:1}]}];this.bezier=new i({type:i,duration:this.options.duration,points:r})}e.prototype.at=function(t){return this.bezier.at(t)};return e}(r);c=function(t){var e,i;i={};e=function(){var e,n,r,s,o;n="";for(s=0,o=arguments.length;s<o;s++){e=arguments[s];n+=e.toString()+","}r=i[n];if(!r){i[n]=r=t.apply(this,arguments)}return r};return e};n=function(){function t(){}t.transform=function(){return this.withPrefix("transform")};t.keyframes=function(){if(document.body.style.webkitAnimation!==void 0){return"-webkit-keyframes"}if(document.body.style.mozAnimation!==void 0){return"-moz-keyframes"}return"keyframes"};t.withPrefix=function(t){var e;e=this.prefixFor(t);if(e==="Moz"){return""+e+(t.substring(0,1).toUpperCase()+t.substring(1))}if(e!==""){return"-"+e.toLowerCase()+"-"+t}return t};t.prefixFor=c(function(t){var e,i,n,r,s,o,a,u,l,h;r=t.split("-");s="";for(o=0,u=r.length;o<u;o++){n=r[o];s+=n.substring(0,1).toUpperCase()+n.substring(1)}h=["Webkit","Moz"];for(a=0,l=h.length;a<l;a++){i=h[a];e=i+s;if(document.body.style[e]!==void 0){return i}}return""});return t}();m={};m.length=function(t){var e,i,n,r,s;e=0;s=t.elements;for(n=0,r=s.length;n<r;n++){i=s[n];e+=Math.pow(i,2)}return Math.sqrt(e)};m.normalize=function(t){var e,i,n,r,s;n=m.length(t);r=[];s=t.elements;for(i in s){e=s[i];r[i]=e/n}return Vector.create(r)};m.combine=function(t,e,i,n){var r;r=[];r[0]=i*t.elements[0]+n*e.elements[0];r[1]=i*t.elements[1]+n*e.elements[1];r[2]=i*t.elements[2]+n*e.elements[2];return Vector.create(r)};h={};h.decompose=function(t){var e,i,n,r,s,o,a,u,l,h,p,f,c,y,d,v,g,x,b,M,_,w,F,T,S,q,P,k,V,z,B,O;v=[];c=[];y=[];u=[];o=[];if(t.elements[3][3]===0){return false}for(e=T=0;T<=3;e=++T){for(n=S=0;S<=3;n=++S){t.elements[e][n]/=t.elements[3][3]}}a=t.dup();for(e=q=0;q<=2;e=++q){a.elements[e][3]=0}a.elements[3][3]=1;if(t.elements[0][3]!==0||t.elements[1][3]!==0||t.elements[2][3]!==0){l=Vector.create([t.elements[0][3],t.elements[1][3],t.elements[2][3],t.elements[3][3]]);i=a.inverse();g=i.transpose();o=g.multiply(l).elements;t.elements[0][3]=0;t.elements[1][3]=0;t.elements[2][3]=0;t.elements[3][3]=1}else{o=[0,0,0,1]}for(e=P=0;P<=2;e=++P){v[e]=t.elements[3][e];t.elements[3][e]=0}p=[];for(e=V=0;V<=2;e=++V){p[e]=Vector.create([t.elements[e][0],t.elements[e][1],t.elements[e][2]])}c[0]=m.length(p[0]);p[0]=m.normalize(p[0]);y[0]=p[0].dot(p[1]);p[1]=m.combine(p[1],p[0],1,-y[0]);c[1]=m.length(p[1]);p[1]=m.normalize(p[1]);y[0]/=c[1];y[1]=p[0].dot(p[2]);p[2]=m.combine(p[2],p[0],1,-y[1]);y[2]=p[1].dot(p[2]);p[2]=m.combine(p[2],p[1],1,-y[2]);c[2]=m.length(p[2]);p[2]=m.normalize(p[2]);y[1]/=c[2];y[2]/=c[2];s=p[1].cross(p[2]);if(p[0].dot(s)<0){for(e=z=0;z<=2;e=++z){c[e]*=-1;p[e].elements[0]*=-1;p[e].elements[1]*=-1;p[e].elements[2]*=-1}}h=[];h[1]=Math.asin(-p[0].elements[2]);if(Math.cos(h[1])!==0){h[0]=Math.atan2(p[1].elements[2],p[2].elements[2]);h[2]=Math.atan2(p[0].elements[1],p[0].elements[0])}else{h[0]=Math.atan2(-p[2].elements[0],p[1].elements[1]);h[1]=0}d=p[0].elements[0]+p[1].elements[1]+p[2].elements[2]+1;if(d>1e-4){f=.5/Math.sqrt(d);M=.25/f;_=(p[2].elements[1]-p[1].elements[2])*f;w=(p[0].elements[2]-p[2].elements[0])*f;F=(p[1].elements[0]-p[0].elements[1])*f}else if(p[0].elements[0]>p[1].elements[1]&&p[0].elements[0]>p[2].elements[2]){f=Math.sqrt(1+p[0].elements[0]-p[1].elements[1]-p[2].elements[2])*2;_=.25*f;w=(p[0].elements[1]+p[1].elements[0])/f;F=(p[0].elements[2]+p[2].elements[0])/f;M=(p[2].elements[1]-p[1].elements[2])/f}else if(p[1].elements[1]>p[2].elements[2]){f=Math.sqrt(1+p[1].elements[1]-p[0].elements[0]-p[2].elements[2])*2;_=(p[0].elements[1]+p[1].elements[0])/f;w=.25*f;F=(p[1].elements[2]+p[2].elements[1])/f;M=(p[0].elements[2]-p[2].elements[0])/f}else{f=Math.sqrt(1+p[2].elements[2]-p[0].elements[0]-p[1].elements[1])*2;_=(p[0].elements[2]+p[2].elements[0])/f;w=(p[1].elements[2]+p[2].elements[1])/f;F=.25*f;M=(p[1].elements[0]-p[0].elements[1])/f}u[0]=_;u[1]=w;u[2]=F;u[3]=M;O=[v,c,y,u,o,h];for(B=0,k=O.length;B<k;B++){x=O[B];for(r in x){b=x[r];if(isNaN(b)){x[r]=0}}}return{translate:v,scale:c,skew:y,quaternion:u,perspective:o,rotate:h}};h.interpolate=function(t,e,i){var n,r,s,o,a,u,l,h,p,f,m,c,y,d,v,g,x,b,M,_,w,F,T,S,q,P,k;d={translate:[],scale:[],skew:[],quaternion:[],perspective:[]};P=["translate","scale","skew","perspective"];for(T=0,q=P.length;T<q;T++){b=P[T];for(v=S=0,k=t[b].length-1;0<=k?S<=k:S>=k;v=0<=k?++S:--S){d[b][v]=(e[b][v]-t[b][v])*i+t[b][v]}}M=t.quaternion;_=e.quaternion;o=M[0];a=M[1];u=M[2];s=M[3];h=_[0];n=_[1];p=_[2];l=_[3];r=o*h+a*n+u*p+s*l;if(r<0){o=-o;a=-a;u=-u;s=-s;r=-r}if(r+1>.05){if(1-r>=.05){F=Math.acos(r);x=1/Math.sin(F);w=Math.sin(F*(1-i))*x;g=Math.sin(F*i)*x}else{w=1-i;g=i}}else{h=-a;n=o;p=-s;l=u;w=Math.sin(piDouble*(.5-i));g=Math.sin(piDouble*i)}m=o*w+h*g;c=a*w+n*g;y=u*w+p*g;f=s*w+l*g;d.quaternion[0]=m;d.quaternion[1]=c;d.quaternion[2]=y;d.quaternion[3]=f;return d};h.recompose=function(t){var e,i,n,r,s,o,a,u,l,h,p,f,m,c,y,d,v,g;h=t.translate;a=t.scale;u=t.skew;s=t.quaternion;r=t.perspective;n=Matrix.I(4);for(e=y=0;y<=3;e=++y){n.elements[e][3]=r[e]}f=s[0];m=s[1];c=s[2];p=s[3];if(u[2]){l=Matrix.I(4);l.elements[2][1]=u[2];n=n.multiply(l)}if(u[1]){l=Matrix.I(4);l.elements[2][0]=u[1];n=n.multiply(l)}if(u[0]){l=Matrix.I(4);l.elements[1][0]=u[0];n=n.multiply(l)}o=Matrix.I(4);o.elements[0][0]=1-2*(m*m+c*c);o.elements[0][1]=2*(f*m-c*p);o.elements[0][2]=2*(f*c+m*p);o.elements[1][0]=2*(f*m+c*p);o.elements[1][1]=1-2*(f*f+c*c);o.elements[1][2]=2*(m*c-f*p);o.elements[2][0]=2*(f*c-m*p);o.elements[2][1]=2*(m*c+f*p);o.elements[2][2]=1-2*(f*f+m*m);n=n.multiply(o);for(e=d=0;d<=2;e=++d){for(i=v=0;v<=2;i=++v){n.elements[e][i]*=a[e]}}for(e=g=0;g<=2;e=++g){n.elements[3][e]=h[e]}return n};h.matrixToString=function(t){var e,i,n,r,s;n="matrix3d(";for(e=r=0;r<=3;e=++r){for(i=s=0;s<=3;i=++s){n+=t.elements[e][i];if(!(e===3&&i===3)){n+=","}}}n+=")";return n};h.transformStringToMatrixString=c(function(t){var e,i,r;e=document.createElement("div");e.style[n.transform()]=t;document.body.appendChild(e);r=window.getComputedStyle(e,null);i=r.transform||r[n.transform()];document.body.removeChild(e);return i});e=[];d=function(t,e){var i,n;for(i in t){n=t[i];if(e[i]!=null){return true}}return false};g=function(t,i){var n,r,s,o;o=[];for(r=0,s=e.length;r<s;r++){n=e[r];if(n.el===t&&d(n.to,i)){o.push(n.stop())}else{o.push(void 0)}}return o};v=["marginTop","marginLeft","marginBottom","marginRight","paddingTop","paddingLeft","paddingBottom","paddingRight","top","left","bottom","right"];y=function(t,e){var i,r,s,o;o=[];for(i in e){s=e[i];r="";if(v.indexOf(i.toLowerCase())!==-1){r="px"}o.push(t.style[n.withPrefix(i)]=""+s+r)}return o};t=function(){t.index=0;function t(t,i,n){var r;this.el=t;this.to=i;if(n==null){n={}}this.apply=x(this.apply,this);this.frame=x(this.frame,this);this.stop=x(this.stop,this);this._start=x(this._start,this);this.start=x(this.start,this);this.defaultForProperty=x(this.defaultForProperty,this);this.parseFrames=x(this.parseFrames,this);this.getFirstFrame=x(this.getFirstFrame,this);this.convertToMatrix3d=x(this.convertToMatrix3d,this);this.convertTransformToMatrix=x(this.convertTransformToMatrix,this);this.dynamic=x(this.dynamic,this);this.setOptions=x(this.setOptions,this);if(window["jQuery"]&&this.el instanceof jQuery){this.el=this.el[0]}this.animating=false;r=this.el.offsetHeight;this.frames=this.parseFrames({0:this.getFirstFrame(this.to),100:this.to});this.setOptions(n);if(this.options.debugName&&s.InteractivePanel){s.InteractivePanel.addAnimation(this)}e.push(this)}t.prototype.setOptions=function(t){var e,i,n,r,o,a,u,h,p,f;if(t==null){t={}}e=(a=this.options)!=null?a.optionsChanged:void 0;this.options=t;if((u=(i=this.options).duration)==null){i.duration=1e3}if((h=(n=this.options).complete)==null){n.complete=null}if((p=(r=this.options).type)==null){r.type=l}if((f=(o=this.options).animated)==null){o.animated=true}this.returnsToSelf=false||this.dynamic().returnsToSelf;this._dynamic=null;if(this.options.debugName&&s.Overrides&&s.Overrides["for"](this.options.debugName)){this.options=s.Overrides.getOverride(this.options,this.options.debugName)}this.dynamic().init();return typeof e==="function"?e():void 0};t.prototype.dynamic=function(){var t;if((t=this._dynamic)==null){this._dynamic=new this.options.type(this.options)}return this._dynamic};t.prototype.convertTransformToMatrix=function(t){return h.transformStringToMatrixString(t)};t.prototype.convertToMatrix3d=function(t){var e,i,n,r,s,o;r=t.match(/matrix3?d?\(([-0-9, \.]*)\)/);if(r){e=r[1].split(",");e=e.map(parseFloat);if(e.length===6){i=[e[0],e[1],0,0,e[2],e[3],0,0,0,0,1,0,e[4],e[5],0,1]}else{i=e}}else{i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}s=[];for(n=o=0;o<=3;n=++o){s.push(i.slice(n*4,n*4+4))}return Matrix.create(s)};t.prototype.getFirstFrame=function(t){var e,i,r,s;e={};r=window.getComputedStyle(this.el,null);for(i in t){s=this.el.style[n.withPrefix(i)];if(!s){s=r[n.withPrefix(i)]}e[i]=s}return e};t.prototype.parseFrames=function(t){var e,i,n,r,s,o,a,u,l,p;n={};for(s in t){o=t[s];r={};for(e in o){u=o[e];if(e!=="transform"){l=u+"";i=l.match(/([-0-9.]*)(.*)/);p=parseFloat(i[1]);a=i[2]}else{p=h.decompose(this.convertToMatrix3d(this.convertTransformToMatrix(u)));a=""}r[e]={value:p,unit:a}}n[s]=r}return n};t.prototype.defaultForProperty=function(t){if(t==="opacity"){return 1}return 0};t.prototype.start=function(t){var e;if(t==null){t={}}if((e=t.delay)==null){t.delay=0}g(this.el,this.to);if(t.delay<=0){return this._start()}else{return setTimeout(this._start,t.delay)}};t.prototype._start=function(){if(!this.options.animated){this.apply(1,{progress:1});return}this.animating=true;this.ts=null;if(this.stopped){this.stopped=false}return requestAnimationFrame(this.frame)};t.prototype.stop=function(){this.animating=false;return this.stopped=true};t.prototype.frame=function(t){var e,i,n,r;if(this.stopped){return}n=0;if(this.ts){i=t-this.ts;n=i/this.options.duration}else{this.ts=t}e=this.dynamic().at(n);this.apply(e[1],{progress:n});if(n<1){return requestAnimationFrame(this.frame)}else{this.animating=false;this.dynamic().init();return typeof(r=this.options).complete==="function"?r.complete(this):void 0}};t.prototype.apply=function(t,e){var i,n,r,s,o,a,u,l,p,f,m,c,d;if(e==null){e={}}n=this.frames[0];r=this.frames[100];l=e.progress;if(l==null){l=-1}f="";p={};for(s in r){c=r[s];d=c.value;m=c.unit;a=null;if(l>=1){if(this.returnsToSelf){a=n[s].value}else{a=r[s].value}}if(s==="transform"){if(a==null){a=h.interpolate(n[s].value,r[s].value,t)}o=h.recompose(a);p["transform"]=h.matrixToString(o)}else{if(!a){u=null;if(n[s]){u=n[s].value}if(u==null){u=this.defaultForProperty(s)}i=d-u;a=u+i*t}p[s]=a}}return y(this.el,p)};return t}();s={Animation:t,Types:{Spring:f,SelfSpring:p,Gravity:a,GravityWithForce:u,Linear:l,Bezier:i,EaseInOut:o},css:y};try{if(module){module.exports=s}else{this.Dynamics=s}}catch(_){this.Dynamics=s}}).call(this);